{"version":3,"file":"index.js","mappings":"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","sources":["webpack://default/./src/lib/fileInfo.ts","webpack://default/./src/index.ts","webpack://default/./src/cli.ts","webpack://default/./src/lib/task.ts","webpack://default/external commonjs \"yargs\"","webpack://default/./src/actions/init.ts","webpack://default/./src/actions/download.ts","webpack://default/./src/lib/log.ts","webpack://default/external commonjs \"glob\"","webpack://default/external commonjs \"yargs/helpers\"","webpack://default/./src/actions/upload.ts","webpack://default/./src/lib/projectConfig.ts","webpack://default/external commonjs \"listr\"","webpack://default/./src/lib/config.ts","webpack://default/external commonjs \"fs-extra\"","webpack://default/./src/lib/types.ts","webpack://default/./src/actions/index.ts","webpack://default/external commonjs \"chalk\"","webpack://default/external node-commonjs \"path\"","webpack://default/external commonjs \"inquirer\"","webpack://default/external commonjs \"axios\"","webpack://default/webpack/bootstrap","webpack://default/webpack/startup"],"sourcesContent":["import glob from 'glob';\nimport path from 'path';\nimport fs from 'fs-extra';\nimport { CURRENT_WORK_DIR } from './config';\nimport { FileInfo, TranslationFile } from './types';\n\nconst _getGlobPatterns = (translatioFile: TranslationFile): string[] => {\n    const directory = translatioFile.directory ?? '';\n    const file = `${translatioFile.filename}.${translatioFile.extension}`;\n    const filePattern = path.join(CURRENT_WORK_DIR, directory, file);\n    const globPattern = _resolvePathPattern(filePattern, '*');\n\n    return [filePattern, globPattern];\n};\n\nconst _getLanguageFromLocale = (locale: string): string => {\n    return locale.replace('_', '-').split('-', 2)[0];\n};\n\nconst _getLocaleFrom = (\n    filePath: string,\n    filePattern: string,\n    locales: string[],\n): string | undefined => {\n    return locales.find((locale): boolean => {\n        return filePath === _resolvePathPattern(filePattern, locale);\n    });\n};\n\nconst _resolvePathPattern = (filePattern: string, locale: string): string => {\n    const language = locale === '*' ? '*' : _getLanguageFromLocale(locale);\n    return filePattern\n        .replace('%language', language)\n        .replace('%locale', locale);\n};\n\nexport const getUploadFileInfosOfTranslationFile = (\n    translationFile: TranslationFile,\n): FileInfo[] => {\n    const [filePattern, globPattern] = _getGlobPatterns(translationFile);\n    const files = glob.sync(globPattern);\n    const fileInfos: FileInfo[] = [];\n\n    files.forEach((filePath): void => {\n        const locale = _getLocaleFrom(\n            filePath,\n            filePattern,\n            translationFile.locales,\n        );\n        if (locale) {\n            fileInfos.push({\n                path: filePath,\n                locale,\n            });\n        }\n    });\n\n    return fileInfos;\n};\n\nexport const getDownloadFileInfosOfTranslationFile = (\n    translationFile: TranslationFile,\n): FileInfo[] => {\n    const [filePattern] = _getGlobPatterns(translationFile);\n    const fileInfos: FileInfo[] = [];\n\n    translationFile.locales.forEach((locale): void => {\n        const filePath = _resolvePathPattern(filePattern, locale);\n        fileInfos.push({\n            path: filePath,\n            locale,\n        });\n    });\n\n    return fileInfos;\n};\n\nexport const readContent = (filePath: string): string => {\n    return fs.readFileSync(filePath, 'utf8');\n};\n\nexport const writeContent = (filePath: string, content: string): void => {\n    fs.ensureFileSync(filePath);\n\n    return fs.writeFileSync(filePath, content);\n};\n","export { default } from './cli';\n","import axios from 'axios';\nimport fs from 'fs-extra';\nimport inquirer from 'inquirer';\nimport path from 'path';\nimport yargs from 'yargs';\nimport { hideBin } from 'yargs/helpers';\nimport {\n    BASE_URL,\n    CURRENT_WORK_DIR,\n    DEBUG_BASE_URL,\n    DEBUG_FILENAME,\n    DEFAULT_API_KEY,\n    FILENAME,\n} from './lib/config';\nimport { Action, Options } from './lib/types';\nimport { init, upload, download } from './actions';\nimport { runTasks } from './lib/task';\nimport { ListrTask } from 'listr';\n\nconst actionFromString = (action: string): Action => {\n    switch (action) {\n        case 'init':\n            return Action.INIT;\n        case 'upload':\n            return Action.UPLOAD;\n        case 'download':\n            return Action.DOWNLOAD;\n        default:\n            return Action.NONE;\n    }\n};\n\nconst parseArgumentsIntoOptions = async (\n    rawArgs: string[],\n): Promise<Options> => {\n    const argv = await yargs(hideBin(rawArgs))\n        .epilogue(\n            'for more information, find our website at https://i18nature.com',\n        )\n        .usage(\n            'Command-line tool of I18Nature localization tool.\\n\\nUsage: $0 <cmd> [args]',\n        )\n        .command(\n            'init [project_api_key]',\n            'Create .i18naturerc.json file.',\n            (newYargs) => {\n                return newYargs.positional('project_api_key', {\n                    describe: 'project to bind on',\n                    default: DEFAULT_API_KEY,\n                });\n            },\n            (newArgv) => {\n                if (newArgv.verbose) {\n                    console.info(\n                        `create config file of: ${newArgv.project_api_key}`,\n                    );\n                }\n            },\n        )\n        .command(\n            'upload',\n            'Upload translation files.',\n            (newYargs) => newYargs,\n            (newArgv) => {\n                if (newArgv.verbose) {\n                    console.info(`upload translation file`);\n                }\n            },\n        )\n        .command(\n            'download',\n            'Download translation files.',\n            (newYargs) => newYargs,\n            (newArgv) => {\n                if (newArgv.verbose) {\n                    console.info(`download translation file`);\n                }\n            },\n        )\n        .options({\n            help: {\n                type: 'boolean',\n                alias: 'h',\n                description: 'Show help',\n                global: false,\n            },\n            verbose: {\n                type: 'boolean',\n                alias: 'v',\n                description: 'Run with verbose logging',\n                global: true,\n            },\n            yes: {\n                type: 'boolean',\n                alias: 'y',\n                description: 'Skip prompts',\n                global: true,\n            },\n            debug: {\n                type: 'boolean',\n                description: 'Debug mode',\n                global: true,\n            },\n            overwriteTranslations: {\n                type: 'boolean',\n                description: 'Overwrite translation files on upload',\n                global: true,\n            },\n        }).argv;\n\n    const configFileName = argv.debug ? DEBUG_FILENAME : FILENAME;\n    const configFilePath = path.join(CURRENT_WORK_DIR, configFileName);\n\n    return {\n        projectApiKey: argv.project_api_key as string,\n        skipPrompts: argv.yes ?? false,\n        verbose: argv.verbose ?? false,\n        debug: argv.debug ?? false,\n        overwriteConfigFile: argv.yes ?? false,\n        overwriteTranslations: argv.overwriteTranslations ?? false,\n        configFileName,\n        configFilePath,\n        directory: '',\n        existsProjectConfigFile: fs.existsSync(configFilePath),\n        action: actionFromString(argv._[0] as string),\n    };\n};\n\nconst promptForMissingOptions = async (options: Options): Promise<Options> => {\n    if (options.skipPrompts) {\n        return options;\n    }\n\n    const questions = [];\n    const isDefaultApiKey = options.projectApiKey === DEFAULT_API_KEY;\n\n    if (options.action === Action.INIT && options.existsProjectConfigFile) {\n        questions.push({\n            type: 'confirm',\n            name: 'overwriteConfigFile',\n            message: `Overwrite existing ${options.configFileName} file?`,\n            default: false,\n        });\n    }\n\n    if (options.action === Action.INIT) {\n        let projectConfig = {\n            project_api_key: options.projectApiKey,\n        };\n        if (options.existsProjectConfigFile) {\n            projectConfig = JSON.parse(\n                fs.readFileSync(options.configFilePath, 'utf8'),\n            );\n        }\n        questions.push({\n            type: 'input',\n            name: 'projectApiKey',\n            message: 'Project API key?',\n            default: projectConfig.project_api_key,\n            when: (newAnswers: any) =>\n                newAnswers.overwriteConfigFile || isDefaultApiKey,\n        });\n\n        questions.push({\n            type: 'input',\n            name: 'directory',\n            message: 'Relative path of translation files directory?',\n            default: 'i18n/locales',\n            when: (newAnswers: any) =>\n                newAnswers.overwriteConfigFile ||\n                !options.existsProjectConfigFile,\n        });\n    }\n\n    const answers = await inquirer.prompt(questions);\n    return {\n        ...options,\n        projectApiKey:\n            options.projectApiKey !== DEFAULT_API_KEY\n                ? options.projectApiKey\n                : answers.projectApiKey,\n        overwriteConfigFile:\n            answers.overwriteConfigFile || !options.existsProjectConfigFile,\n        directory: options.directory || answers.directory,\n    };\n};\n\nconst actionHandler = (options: Options): ListrTask[] => {\n    axios.defaults.baseURL = options.debug ? DEBUG_BASE_URL : BASE_URL;\n\n    switch (options.action) {\n        case Action.INIT:\n            return init(options);\n        case Action.UPLOAD:\n            return upload(options);\n        case Action.DOWNLOAD:\n            return download(options);\n        default:\n            return [];\n    }\n};\n\nexport default async (args: string[]): Promise<void> => {\n    let options = await parseArgumentsIntoOptions(args);\n    options = await promptForMissingOptions(options);\n    const taskList = actionHandler(options);\n\n    return runTasks(taskList);\n};\n","import Listr, { ListrTask } from 'listr';\nimport {\n    getDownloadFileInfosOfTranslationFile,\n    getUploadFileInfosOfTranslationFile,\n} from './fileInfo';\nimport { FileInfo, TranslationFile } from './types';\n\nexport const getUploadTasksFromTranslationFiles = (\n    translationFiles: TranslationFile[],\n    taskCallback: (\n        translationFile: TranslationFile,\n        fileInfo: FileInfo,\n    ) => Promise<void>,\n): ListrTask[] => {\n    return _getTasksFromTranslationFileData({\n        title: 'Upload translation file',\n        subtitle: 'Upload data of',\n        translationFiles,\n        fileInfoCallback: getUploadFileInfosOfTranslationFile,\n        taskCallback,\n    });\n};\n\nexport const getDownloadTasksFromTranslationFiles = (\n    translationFiles: TranslationFile[],\n    taskCallback: (\n        translationFile: TranslationFile,\n        fileInfo: FileInfo,\n    ) => Promise<void>,\n): ListrTask[] => {\n    return _getTasksFromTranslationFileData({\n        title: 'Download translation file',\n        subtitle: 'Download data of',\n        translationFiles,\n        fileInfoCallback: getDownloadFileInfosOfTranslationFile,\n        taskCallback,\n    });\n};\n\nconst _getTasksFromTranslationFileData = (data: {\n    title: string;\n    subtitle: string;\n    translationFiles: TranslationFile[];\n    fileInfoCallback: (translationFile: TranslationFile) => FileInfo[];\n    taskCallback: (\n        translationFile: TranslationFile,\n        fileInfo: FileInfo,\n    ) => Promise<void>;\n}): ListrTask[] => {\n    const taskList: ListrTask[] = [];\n\n    data.translationFiles.forEach(async (translationFile): Promise<void> => {\n        taskList.push({\n            title: `${data.title}: ${translationFile.name}`,\n            task: async () => {\n                const subTaskList: ListrTask[] = [];\n                const fileInfos = data.fileInfoCallback(translationFile);\n                fileInfos.forEach((fileInfo) => {\n                    subTaskList.push({\n                        title: `${data.subtitle}: ${fileInfo.path}`,\n                        task: async () => {\n                            await data.taskCallback(translationFile, fileInfo);\n                        },\n                    });\n                });\n\n                return new Listr(subTaskList);\n            },\n        });\n    });\n\n    return taskList;\n};\n\nexport const runTasks = async (taskList: ListrTask[]): Promise<void> => {\n    const tasks = new Listr(taskList);\n\n    return tasks.run().catch((reason): void => {\n        console.error(reason);\n    });\n};\n","module.exports = require(\"yargs\");","import axios from 'axios';\nimport { Options, TranslationFile } from '../lib/types';\nimport {\n    createProjectConfig,\n    overwriteNotAllowedProjectConfigFile,\n    saveProjectConfig,\n} from '../lib/projectConfig';\nimport { logHeader } from '../lib/log';\nimport { ListrTask } from 'listr';\n\ninterface InitResponse {\n    translation_files: TranslationFile[];\n    supported_languages: string[];\n}\n\nexport default (options: Options): ListrTask[] => {\n    logHeader('INIT');\n\n    if (!options.overwriteConfigFile) {\n        return overwriteNotAllowedProjectConfigFile(options);\n    }\n\n    return [\n        {\n            title: `Create config file: ${options.configFilePath}`,\n            task: async () => {\n                try {\n                    const { data } = await axios.get<InitResponse>(\n                        `/api/projects/init`,\n                        {\n                            params: {\n                                api_key: options.projectApiKey,\n                            },\n                        },\n                    );\n                    const translationFiles = data.translation_files.map(\n                        (translationFile): TranslationFile => {\n                            return {\n                                ...translationFile,\n                                directory: options.directory,\n                            };\n                        },\n                    );\n\n                    const projectConfig = createProjectConfig(\n                        options.projectApiKey,\n                        translationFiles,\n                    );\n                    saveProjectConfig(options.configFilePath, projectConfig);\n                } catch (error: any) {\n                    return Promise.reject(error);\n                }\n            },\n        },\n    ];\n};\n","import axios from 'axios';\nimport {\n    getProjectConfig,\n    missingProjectConfigFile,\n} from '../lib/projectConfig';\nimport { Options } from '../lib/types';\nimport { logHeader } from '../lib/log';\nimport { getDownloadTasksFromTranslationFiles } from '../lib/task';\nimport { writeContent } from '../lib/fileInfo';\nimport { ListrTask } from 'listr';\n\ninterface DownloadResponse {\n    content: string;\n}\n\nexport default (options: Options): ListrTask[] => {\n    logHeader('DOWNLOAD');\n\n    if (!options.existsProjectConfigFile) {\n        return missingProjectConfigFile(options);\n    }\n\n    const projectConfig = getProjectConfig(options.configFilePath);\n    return getDownloadTasksFromTranslationFiles(\n        projectConfig.translation_files,\n        async (translationFile, fileInfo): Promise<void> => {\n            try {\n                const { data } = await axios.get<DownloadResponse>(\n                    `/api/translation-files/${\n                        translationFile.id ?? null\n                    }/download`,\n                    {\n                        params: {\n                            locale: fileInfo.locale,\n                            api_key: projectConfig.project_api_key,\n                        },\n                    },\n                );\n                writeContent(fileInfo.path, data.content);\n            } catch (error: any) {\n                return Promise.reject(error);\n            }\n        },\n    );\n};\n","import chalk from 'chalk';\nimport { GREEN_COLOR } from './config';\n\nexport const logHeader = (title: string): void => {\n    return console.log(chalk.hex(GREEN_COLOR).bold(title));\n};\n\nexport const logError = (msg: string): void => {\n    return console.error(chalk.red.bold(msg));\n};\n","module.exports = require(\"glob\");","module.exports = require(\"yargs/helpers\");","import axios from 'axios';\nimport {\n    getProjectConfig,\n    missingProjectConfigFile,\n    saveProjectConfig,\n} from '../lib/projectConfig';\nimport { Options } from '../lib/types';\nimport { logHeader } from '../lib/log';\nimport { getUploadTasksFromTranslationFiles } from '../lib/task';\nimport { readContent } from '../lib/fileInfo';\nimport { ListrTask } from 'listr';\n\ninterface UploadResponse {\n    translation_file_id?: string;\n}\n\nexport default (options: Options): ListrTask[] => {\n    logHeader('UPLOAD');\n\n    if (!options.existsProjectConfigFile) {\n        return missingProjectConfigFile(options);\n    }\n\n    const projectConfig = getProjectConfig(options.configFilePath);\n    const taskList = getUploadTasksFromTranslationFiles(\n        projectConfig.translation_files,\n        async (translationFile, fileInfo): Promise<void> => {\n            try {\n                const { data } = await axios.post<UploadResponse>(\n                    `/api/translation-files/${\n                        translationFile.id ?? null\n                    }/upload`,\n                    {\n                        translation_file: translationFile,\n                        content: readContent(fileInfo.path),\n                    },\n                    {\n                        params: {\n                            overwrite: options.overwriteTranslations,\n                            locale: fileInfo.locale,\n                            api_key: projectConfig.project_api_key,\n                        },\n                    },\n                );\n                translationFile.id = data.translation_file_id;\n            } catch (error: any) {\n                return Promise.reject(error);\n            }\n        },\n    );\n\n    taskList.push({\n        title: `Modified config file: ${options.configFilePath}`,\n        task: () => {\n            saveProjectConfig(options.configFilePath, projectConfig);\n        },\n    });\n\n    return taskList;\n};\n","import { ListrTask } from 'listr';\nimport { INDENT } from './config';\nimport { Options, ProjectConfig, TranslationFile } from './types';\nimport { readContent, writeContent } from './fileInfo';\n\nexport const createProjectConfig = (\n    projectApiKey: string,\n    translationFiles: TranslationFile[],\n    version = 1,\n): ProjectConfig => {\n    return {\n        version,\n        project_api_key: projectApiKey,\n        translation_files: translationFiles,\n    };\n};\n\nexport const getProjectConfig = (configFilePath: string): ProjectConfig => {\n    const data = readContent(configFilePath);\n\n    return JSON.parse(data) as ProjectConfig;\n};\n\nexport const saveProjectConfig = (\n    configFilePath: string,\n    projectConfig: ProjectConfig,\n): void => {\n    return writeContent(\n        configFilePath,\n        JSON.stringify(projectConfig, null, INDENT),\n    );\n};\n\nexport const missingProjectConfigFile = (\n    options: Partial<Options>,\n): ListrTask[] => {\n    return [\n        {\n            title: `Missing config file: ${options.configFilePath}`,\n            task: () =>\n                Promise.reject(\n                    new Error('Create config file or init project!'),\n                ),\n        },\n    ];\n};\n\nexport const overwriteNotAllowedProjectConfigFile = (\n    options: Partial<Options>,\n): ListrTask[] => {\n    return [\n        {\n            title: `Create config file: ${options.configFilePath}`,\n            task: () =>\n                Promise.reject(\n                    new Error('Config file overwrite is not allowed!'),\n                ),\n        },\n    ];\n};\n","module.exports = require(\"listr\");","import axios from 'axios';\n\nexport const DEFAULT_API_KEY = 'API_KEY';\n\nexport const FILENAME = '.i18naturerc.json';\nexport const DEBUG_FILENAME = '.i18naturerc-debug.json';\nexport const CURRENT_WORK_DIR = process.cwd();\n\nexport const DEBUG_BASE_URL = 'http://0.0.0.0:80';\nexport const BASE_URL = 'https://app.i18nature.com';\n\nexport const GREEN_COLOR = '#0A4414';\n\nexport const INDENT = 2;\n\naxios.interceptors.response.use(\n    (response) => response,\n    (error) => {\n        const message = error.response?.data?.message ?? error.message;\n        return Promise.reject(new Error(message));\n    },\n);\n","module.exports = require(\"fs-extra\");","export enum Action {\n    NONE,\n    INIT,\n    UPLOAD,\n    DOWNLOAD,\n}\n\nexport interface Options {\n    projectApiKey: string;\n    skipPrompts: boolean;\n    verbose: boolean;\n    overwriteConfigFile: boolean;\n    overwriteTranslations: boolean;\n    debug: boolean;\n    action: Action;\n    directory: string;\n    configFileName: string;\n    configFilePath: string;\n    existsProjectConfigFile: boolean;\n}\n\nexport interface TranslationFile {\n    id?: string;\n    name: string;\n    locales: string[];\n    default_locale: string;\n    filename: string;\n    extension: string;\n    wrapper_key?: string;\n    directory?: string;\n}\n\nexport interface ProjectConfig {\n    version: number;\n    project_api_key: string;\n    translation_files: TranslationFile[];\n}\n\nexport interface FileInfo {\n    path: string;\n    locale: string;\n}\n","export { default as download } from './download';\nexport { default as init } from './init';\nexport { default as upload } from './upload';\n","module.exports = require(\"chalk\");","module.exports = require(\"path\");","module.exports = require(\"inquirer\");","module.exports = require(\"axios\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(156);\n"],"names":["_getGlobPatterns","translatioFile","directory","file","filename","extension","filePattern","join","CURRENT_WORK_DIR","_resolvePathPattern","locale","language","replace","split","_getLanguageFromLocale","getUploadFileInfosOfTranslationFile","translationFile","globPattern","files","sync","fileInfos","forEach","filePath","locales","find","_getLocaleFrom","push","path","getDownloadFileInfosOfTranslationFile","readContent","readFileSync","writeContent","content","ensureFileSync","writeFileSync","default","actionFromString","action","Action","INIT","UPLOAD","DOWNLOAD","NONE","async","args","options","rawArgs","argv","hideBin","epilogue","usage","command","newYargs","positional","describe","DEFAULT_API_KEY","newArgv","verbose","console","info","project_api_key","help","type","alias","description","global","yes","debug","overwriteTranslations","configFileName","DEBUG_FILENAME","FILENAME","configFilePath","projectApiKey","skipPrompts","overwriteConfigFile","existsProjectConfigFile","existsSync","_","parseArgumentsIntoOptions","questions","isDefaultApiKey","name","message","projectConfig","JSON","parse","when","newAnswers","answers","prompt","promptForMissingOptions","taskList","defaults","baseURL","DEBUG_BASE_URL","BASE_URL","init","upload","download","actionHandler","runTasks","getUploadTasksFromTranslationFiles","translationFiles","taskCallback","_getTasksFromTranslationFileData","title","subtitle","fileInfoCallback","getDownloadTasksFromTranslationFiles","data","task","subTaskList","fileInfo","run","catch","reason","error","module","exports","require","logHeader","get","params","api_key","translation_files","map","createProjectConfig","saveProjectConfig","Promise","reject","overwriteNotAllowedProjectConfigFile","missingProjectConfigFile","getProjectConfig","id","log","hex","GREEN_COLOR","bold","logError","msg","red","post","translation_file","overwrite","translation_file_id","version","stringify","INDENT","Error","process","cwd","interceptors","response","use","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call"],"ignoreList":[],"sourceRoot":""}